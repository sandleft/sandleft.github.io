const require_utils = require('../../../common/utils.cjs');

//#region src/namespaces/source/generate/utils.ts
const generateAccount = (account) => {
	if (!require_utils.isObject(account) || !require_utils.isNonEmptyString(account.service)) return;
	return require_utils.trimObject({
		"@service": account.service,
		...require_utils.generateTextOrCdataString(account.value)
	});
};
const generateLikes = (likes) => {
	if (!require_utils.isObject(likes) || !require_utils.isNonEmptyString(likes.server)) return;
	return { "@server": likes.server };
};
const generateArchive = (archive) => {
	if (!require_utils.isObject(archive) || !require_utils.isNonEmptyString(archive.url) || !require_utils.isNonEmptyString(archive.startDay)) return;
	return require_utils.trimObject({
		"source:url": archive.url,
		"source:startDay": archive.startDay,
		"source:endDay": require_utils.generateCdataString(archive.endDay),
		"source:filename": require_utils.generateCdataString(archive.filename)
	});
};
const generateSubscriptionList = (subscriptionList) => {
	if (!require_utils.isObject(subscriptionList) || !require_utils.isNonEmptyString(subscriptionList.url)) return;
	return require_utils.trimObject({
		"@url": subscriptionList.url,
		...require_utils.generateTextOrCdataString(subscriptionList.value)
	});
};
const generateFeed = (feed) => {
	if (!require_utils.isObject(feed)) return;
	return require_utils.trimObject({
		"source:account": require_utils.trimArray(feed.accounts, generateAccount),
		"source:likes": generateLikes(feed.likes),
		"source:archive": generateArchive(feed.archive),
		"source:subscriptionList": require_utils.trimArray(feed.subscriptionLists, generateSubscriptionList),
		"source:cloud": require_utils.generateCdataString(feed.cloud),
		"source:blogroll": require_utils.generateCdataString(feed.blogroll),
		"source:self": require_utils.generateCdataString(feed.self)
	});
};
const generateItem = (item) => {
	if (!require_utils.isObject(item)) return;
	return require_utils.trimObject({
		"source:markdown": require_utils.generateCdataString(item.markdown),
		"source:outline": require_utils.trimArray(item.outlines, require_utils.generateCdataString),
		"source:localTime": require_utils.generateCdataString(item.localTime),
		"source:linkFull": require_utils.generateCdataString(item.linkFull)
	});
};

//#endregion
exports.generateFeed = generateFeed;
exports.generateItem = generateItem;