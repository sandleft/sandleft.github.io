import { generateCdataString, generateCsvOf, generateNumber, generatePlainString, generateYesNoBoolean, isNonEmptyString, isObject, trimArray, trimObject } from "../../../common/utils.js";

//#region src/namespaces/itunes/generate/utils.ts
const generateImage = (image) => {
	if (!isNonEmptyString(image)) return;
	return { "@href": generatePlainString(image) };
};
const generateCategory = (category) => {
	if (!isObject(category)) return;
	return trimObject({
		"@text": generatePlainString(category.text),
		"itunes:category": trimArray(category.categories, generateCategory)
	});
};
const generateOwner = (owner) => {
	if (!isObject(owner)) return;
	return trimObject({
		"itunes:name": generateCdataString(owner.name),
		"itunes:email": generateCdataString(owner.email)
	});
};
const generateItem = (item) => {
	if (!isObject(item)) return;
	return trimObject({
		"itunes:duration": generateNumber(item.duration),
		"itunes:image": generateImage(item.image),
		"itunes:explicit": generateYesNoBoolean(item.explicit),
		"itunes:author": generateCdataString(item.author),
		"itunes:title": generateCdataString(item.title),
		"itunes:episode": generateNumber(item.episode),
		"itunes:season": generateNumber(item.season),
		"itunes:episodeType": generateCdataString(item.episodeType),
		"itunes:block": generateYesNoBoolean(item.block),
		"itunes:summary": generateCdataString(item.summary),
		"itunes:subtitle": generateCdataString(item.subtitle),
		"itunes:keywords": generateCsvOf(item.keywords)
	});
};
const generateFeed = (feed) => {
	if (!isObject(feed)) return;
	return trimObject({
		"itunes:image": generateImage(feed.image),
		"itunes:category": trimArray(feed.categories, generateCategory),
		"itunes:explicit": generateYesNoBoolean(feed.explicit),
		"itunes:author": generateCdataString(feed.author),
		"itunes:title": generateCdataString(feed.title),
		"itunes:type": generateCdataString(feed.type),
		"itunes:new-feed-url": generateCdataString(feed.newFeedUrl),
		"itunes:block": generateYesNoBoolean(feed.block),
		"itunes:complete": generateYesNoBoolean(feed.complete),
		"itunes:applepodcastsverify": generateCdataString(feed.applePodcastsVerify),
		"itunes:summary": generateCdataString(feed.summary),
		"itunes:subtitle": generateCdataString(feed.subtitle),
		"itunes:keywords": generateCsvOf(feed.keywords),
		"itunes:owner": generateOwner(feed.owner)
	});
};

//#endregion
export { generateFeed, generateItem };