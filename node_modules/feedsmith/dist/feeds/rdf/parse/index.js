import { locales, namespacePrefixes, namespaceUris } from "../../../common/config.js";
import { createNamespaceNormalizator } from "../../../common/utils.js";
import { detect } from "../detect/index.js";
import { parser } from "./config.js";
import { retrieveFeed } from "./utils.js";

//#region src/feeds/rdf/parse/index.ts
const parse = (value, options) => {
	if (!detect(value)) throw new Error(locales.invalidFeedFormat);
	const parsed = retrieveFeed(createNamespaceNormalizator(namespaceUris, namespacePrefixes, "rdf")(parser.parse(value)), options);
	if (!parsed) throw new Error(locales.invalidFeedFormat);
	return parsed;
};

//#endregion
export { parse };